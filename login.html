<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="assets/css/register_style.css">
  
  
</head>
<body>

  <p></p>

  <div class="center">

    
    <h1 id="login">Login</h1>

    <p id="email">Enter Email</p>
    <input type="text" id="user"/>

    <p id="password_name">Enter Password</p>
    <input type="password" id="password"/>
    <br>

    <!--<input type="button" id = "save" value="Login" onclick="send_json()"> <br>-->

    <input type="button" id = "save" value="Login" onclick="send_json()"> <br>

    
    <a id="try_again" href="login.html"></a>
    <br>
    <a href="index.html">Back To Homepage</a>
    <p id="error"></p>

  </div>
  
  
</body>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script>


  function checkifpasssame() {

    var password = document.getElementById("password").value;
    var current = document.getElementById("password_check").value;

    if (current == password){
      document.getElementById("confirm_text").innerHTML = "Ok!";
      document.getElementById("confirm_text").style.color = 'green';
      document.getElementById("save").disabled = false;
    }else{
      document.getElementById("confirm_text").innerHTML = "Password doesn't match";
      document.getElementById("confirm_text").style.color = 'red';
      document.getElementById("save").disabled = true;
    }
  }


  function fetch_data() {
    var URL = "https://api.github.com/users/Devaaron7"

    fetch(URL)
    .then(results => results.json())
    .then(console.log);
  }

  function login_error() {
    document.getElementById("email").innerHTML = "";
    var user = document.querySelector('#user');
    user.style.display = "none";
    document.getElementById("password_name").innerHTML = "";
    var pass = document.querySelector("#password");
    pass.style.display = "none";
    var pass = document.querySelector("#save");
    pass.style.display = "none";
    document.getElementById("login").innerHTML = "Login Fail";
    document.getElementById("try_again").innerHTML = "Retry Login";
  }


  
  function send_data() {
    var URL = "http://127.0.0.1:5000/"
    var username = document.getElementById("user").value;
    var password = document.getElementById("password").value;

    fetch(URL, { method: "POST", body: username + ":" + password})
    .then(results => results.json())
    .then(console.log);
  }



  function send_json() {
    var URL = "https://universalclassroom.herokuapp.com/check"
    var username = document.getElementById("user").value;
    var password = document.getElementById("password").value;
    var answer;

    $.ajax({
      type: "POST",
      url: URL,
      data: JSON.stringify({ "userName": username, "password" : password }),
      contentType: "application/json",
      success: function (result) {

        if (result == "Member"){
          document.location.href="user_homepage.html";
        }else{
          login_error();
        }
        
      },
      error: function (result, status) {
        console.log(result);
        document.getElementById("error").innerText = 'Error trying to connect';
        document.getElementById("error").style.color = 'red';
      }
    });



      }


     
</script> 

</html>