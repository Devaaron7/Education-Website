<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="assets/css/register_style.css">
  
  
</head>
<body>

  <p></p>



    
  <div class="center">

    <h1>Login</h1>

    <p>Enter Email</p>
    <input type="text" id="user"/>

    <p>Enter Password</p>
    <input type="password" id="password"/>
    <br>

    <input type="button" id = "save" value="Login" onclick="send_json()">

  

  </div>
  
  
</body>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script>




  function saveStaticDataToFile() {

    if (document.getElementById("confirm_text").value == "Ok!"){

      var username = document.getElementById("user").value;
      var password = document.getElementById("password").value;
      var stdin = username + "\n" + password;
      var text_file = new Blob([stdin], {type:"txt"});
      var anchor = document.createElement("a");
      anchor.href = URL.createObjectURL(text_file);
      anchor.download = "info.txt";
      anchor.click();
    }else{
      document.getElementById("save").innerHTML = "Check Password Match"
    }

    }


  function checkifpasssame() {

    var password = document.getElementById("password").value;
    var current = document.getElementById("password_check").value;

    if (current == password){
      document.getElementById("confirm_text").innerHTML = "Ok!";
      document.getElementById("confirm_text").style.color = 'green';
      document.getElementById("save").disabled = false;
    }else{
      document.getElementById("confirm_text").innerHTML = "Password doesn't match";
      document.getElementById("confirm_text").style.color = 'red';
      document.getElementById("save").disabled = true;
    }
  }


  function fetch_data() {
    var URL = "https://api.github.com/users/Devaaron7"

    fetch(URL)
    .then(results => results.json())
    .then(console.log);
  }

  
  function send_data() {
    var URL = "http://127.0.0.1:5000/"
    var username = document.getElementById("user").value;
    var password = document.getElementById("password").value;

    fetch(URL, { method: "POST", body: username + ":" + password})
    .then(results => results.json())
    .then(console.log);
  }



  function send_json() {
    var URL = "http://127.0.0.1:5000/check"
    var username = document.getElementById("user").value;
    var password = document.getElementById("password").value;
    var answer;

    $.ajax({
      type: "POST",
      url: URL,
      data: JSON.stringify({ "userName": username, "password" : password }),
      contentType: "application/json",
      success: function (result) {
        answer = Object.key(result)
        //console.log(result.input_data);
        //console.log(answer.Member);
        
        //document.location.href="login_success.html";
      },
      error: function (result, status) {
        console.log(result);
        //document.location.href="login_fail.html";
      }
    });

      console.log(answer)
      //console.log(answer.includes("member"))

      }


     
</script>

  </script> 

</html>